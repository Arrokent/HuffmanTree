<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>

    <meta name="viewport" content="width=device-width, initial-scale=1">
    <script src="jquery-3.5.1.min.js"></script>
    <script src="huffmanTree.js"></script>
    <link rel="stylesheet" href="bootstrap.min.css">
    <link rel="stylesheet" href="index.css">

    <script>

        // 压缩和减压。为此，需要添加三个步骤：
        // （1）通读输入 文本文件生成文件中所有字母的实际频率；
        // （2）存储哈夫曼树在编码输出文件的开头被解码函数使用；
        // （3）从输出文件读取以生成原始文本文件。


        var str = "张三张三李四李四王五";
        var freq;
        var finalName;

        var inputText = $("#inputText");
        var outputFreq = $('#outputFreq');
        var outputHTCode = $('#outputHTCode');
        var outputTextCode = $('#outputTextCode');

        $(function (ev) {

            $('#uploadText').click(function () {

                // there can use jquery val function, need check
                str = document.getElementById('inputText').value;

                console.log("Text: " + str);
                console.log("URICode: " + encodeURI(str));

                freq = getFreq(str);
                console.log(freq);

                var outputFreq = '';
                $.each(freq, function (index, value) {
                    outputFreq += decodeURI(index);
                    outputFreq += ': ';
                    outputFreq += value;
                    outputFreq += '\t';
                })

                document.getElementById('outputFreq').value = outputFreq;

                finalName = buildHT(freq);
            })

            $('#uploadCode').click(function () {

                // there can use jquery val function, need check
                str = document.getElementById('inputCode').value;

                console.log("Code: " + str);

                var res = getDecode(str, freq[finalName])

                document.getElementById('outputText').value = res;
            })


        })


    </script>


</head>
<body>

<div class="jumbotron">
    <div class="container">
        <h1>HuffmanTree</h1>
        <h2>工具使用：</h2><br>
        <h3>编码：</h3><br>
        <p>&nbsp;&nbsp;1. 选择输入文本或者上传文件</p><br>
        <p>&nbsp;&nbsp;2. 生成哈夫曼树的编码表示</p><br>
        <p>&nbsp;&nbsp;3. 生成该文本编码表示</p><br>
        <h3>解码：</h3><br>
        <p>&nbsp;&nbsp;4. 选择输入文本或者上传二进制文件(需要先生成Huffman树)</p><br>
        <p>&nbsp;&nbsp;5. 输出该二进制文件的解码</p><br>
    </div>
</div>

<div class="container" style="margin: 0 200px">

    <div class="form-group col-xs-6" style="width: 500px">
        <label><h3>输入文本</h3></label>
        <input type="text" class="form-control" id="inputText" placeholder="输入文本">
        <button class="btn btn-default" id="uploadText" style="margin-top: 10px">上传文本</button>
    </div>


    <div class="form-group col-xs-6" style="width: 400px; margin-bottom: 100px">
        <label><h3>选择文件</h3></label>
        <input type="file" name="userUploadFile">
    </div>


    <div class="form-group col-xs-12">
        <label><h3>各字符频率</h3></label>
        <input type="text" class="form-control" id="outputFreq" placeholder="请先输入文本或上传文件">
    </div>


    <div class="form-group col-xs-12">
        <label><h3>Huffman树编码</h3></label>
        <input type="text" class="form-control" id="outputHTCode" placeholder="请先输入文本或上传文件">
    </div>


    <div class="form-group col-xs-12">
        <label><h3>文本编码</h3></label>
        <input type="text" class="form-control" id="outputTextCode" placeholder="请先输入文本或上传文件">
    </div>

    <div class="form-group col-xs-12">
        <label><h3>解码</h3></label>
        <input type="text" class="form-control" id="inputCode" placeholder="请先输入文本或上传文件">
        <button class="btn btn-default" id="uploadCode" style="margin-top: 10px">解码</button>
    </div>

    <div class="form-group col-xs-12">
        <label><h3>编码文本</h3></label>
        <input type="text" class="form-control" id="outputText" placeholder="请先输入文本或上传文件">
    </div>

</div>

</body>
</html>